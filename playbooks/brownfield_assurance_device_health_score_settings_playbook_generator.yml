---
# Playbook to generate YAML configurations for Assurance Device Health Score Settings
# This playbook demonstrates various use cases for the brownfield_assurance_device_health_score_settings_playbook_generator module

- name: Brownfield Assurance Device Health Score Settings Playbook Generator Examples
  hosts: localhost
  vars_files:
    - "credentials.yml"
  connection: local
  gather_facts: false
  tasks:
    # Example 1: Generate all device health score settings configurations
    # - name: Generate complete brownfield configuration for all device families and KPI settings
    #   cisco.dnac.brownfield_assurance_device_health_score_settings_playbook_generator:
    #     dnac_host: "{{ dnac_host }}"
    #     dnac_username: "{{ dnac_username }}"
    #     dnac_password: "{{ dnac_password }}"
    #     dnac_verify: "{{ dnac_verify }}"
    #     dnac_port: "{{ dnac_port }}"
    #     dnac_version: "{{ dnac_version }}"
    #     dnac_debug: "{{ dnac_debug }}"
    #     dnac_log: true
    #     dnac_log_level: DEBUG
    #     dnac_api_task_timeout: 1000
    #     dnac_task_poll_interval: 1
    #     state: merged
    #     config_verify: true
    #     config:
    #       - generate_all_configurations: true
    #         file_path: "/Users/mekandar/Desktop/complete_device_health_score_settings.yml"
    #   register: complete_config_result

    # Example 2: Generate configurations for specific device families
    - name: Generate configuration for specific device families (Access Points and Routers)
      cisco.dnac.brownfield_assurance_device_health_score_settings_playbook_generator:
        dnac_host: "{{ dnac_host }}"
        dnac_username: "{{ dnac_username }}"
        dnac_password: "{{ dnac_password }}"
        dnac_verify: "{{ dnac_verify }}"
        dnac_port: "{{ dnac_port }}"
        dnac_version: "{{ dnac_version }}"
        dnac_debug: "{{ dnac_debug }}"
        dnac_log: true
        dnac_log_level: DEBUG
        dnac_api_task_timeout: 1000
        dnac_task_poll_interval: 1
        state: merged
        config_verify: true
        config: 
          - component_specific_filters:
              device_health_score_settings:
                device_families:
                  - "UNIFIED_AP"
                  - "ROUTER"
                  - "SWITCH_AND_HUB"
                  - "WIRELESS_CONTROLLER"
      # register: specific_families_result

  # hosts: localhost
  # gather_facts: false
  # vars:
  #   # Use the generated configuration file
  #   generated_config_file: "/tmp/complete_device_health_score_settings.yml"
    
  # tasks:
  #   - name: Read generated configuration file
  #     include_vars:
  #       file: "{{ generated_config_file }}"
  #       name: device_health_config
  #     when: generated_config_file is file

  #   - name: Apply device health score settings from generated configuration
  #     cisco.dnac.assurance_device_health_score_settings_workflow_manager:
  #       dnac_host: "{{ dnac_host }}"
  #       dnac_port: "{{ dnac_port }}"
  #       dnac_username: "{{ dnac_username }}"
  #       dnac_password: "{{ dnac_password }}"
  #       dnac_verify: "{{ dnac_verify }}"
  #       dnac_debug: "{{ dnac_debug }}"
  #       dnac_version: "{{ dnac_version }}"
  #       state: merged
  #       config_verify: true
  #       config: "{{ device_health_config.config | default([]) }}"
  #     register: apply_result
  #     when: device_health_config is defined

  #   - name: Display application results
  #     debug:
  #       msg:
  #         - "Configuration applied successfully: {{ apply_result.changed | default(false) }}"
  #         - "Response: {{ apply_result.response | default('No response') }}"
  #     when: apply_result is defined